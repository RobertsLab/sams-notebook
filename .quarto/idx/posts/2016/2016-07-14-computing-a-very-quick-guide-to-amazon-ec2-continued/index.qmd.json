{"title":"Computing - A Very Quick \"Guide\" to Amazon EC2 Continued","markdown":{"yaml":{"author":"Sam White","toc-title":"Contents","toc-depth":5,"toc-location":"left","date":"2016-07-14 20:20:33+00:00","layout":"post","slug":"computing-a-very-quick-guide-to-amazon-ec2-continued","title":"Computing - A Very Quick \"Guide\" to Amazon EC2 Continued","categories":["2016","Miscellaneous"],"tags":["EBS","EC2","s3fs-fuse","scp"]},"containsRefs":false,"markdown":"\n\n[Yesterday's post](https://robertslab.github.io/sams-notebook/posts/2016/2016-07-13-computing-the-very-quick-guide-to-amazon-web-services-cloud-computing-instances-ec2/) ended with me trying to mount a S3 bucket to my EC2 instance using [s3fs-fuse](https://github.com/s3fs-fuse/s3fs-fuse).\n\nWaited for the 36GB of data to copy over to new bucket with proper naming (i.e. no capital letters in name). Copying took hours; left lab before copying completed.\n\n\n\n\n\n    \n\n\n\n![](https://eagle.fish.washington.edu/Arabidopsis/20160714_s3f2_mount_error.jpg)(http://eagle.fish.washington.edu/Arabidopsis/20160714_s3f2_mount_error.jpg)\n\n\n\nSo, that didn't work. The reason that it doesn't work is that I uploaded the files to the S3 bucket via the Amazon AWS command line (awscli). Apparently, s3fs-fuse can't mount S3 buckets that contain data uploaded via awscli [[see this GitHub Issue for s3fs-fuse](https://github.com/s3fs-fuse/s3fs-fuse/issues/333)! However, I had to upload them via awscli because the web interface kept failing!\n\n\n\nThat means I need to upload the data directly to my EC2 instance, but my EC2 instance is set with the default storage capacity of 8GB so I need to increase the capacity to accommodate my two large files, as well as the anticipated intermediate files that will be generated by the types of analysis I plan on running. I'm guessing I'll need at least 100GB to be safe. To do this, I have to [expand the Elastic Block Storage (EBS) volume of my instance](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-expand-volume.html). The rest of stuff below is fully explained and covered very well in the EBS expansion link I have in the previous sentence.\n\nDon't be fooled into thinking I figured any of this out on my own!\n\n\n\n**Expanding the EC2 Instance**\n\nThe initial part of the process is creating a Snapshot of my instance. This took a long time (2.5hrs). However, I did finally decide to refresh the page when I noticed that the \"Status\" progress bar hadn't moved beyond 46% for well over an hour. After refreshing, the \"Status\" showed \"Complete.\" Maybe this actually was ready to go much faster, but the page didn't automatically refresh? Regardless, in retrospect, since this EC2 instance is pretty much brand new and doesn't have too many changes from when it was initialized, I probably should've just created a brand new EC2 instance with the desired amount of EBS...\n\nCreated volume from that Snapshot with 150GB of magnetic storage.\n\nAttached volume to the EC2 instance at /dev/sda1 (the default setting /dev/sdf resulted in an error message about the instance not having a root volume) and SSH'd into the instance. Odd, it seems to show that I still only have 8GB of storage (see the \"Usage of...\" in the screenshot below):\n\n\n\n![](https://eagle.fish.washington.edu/Arabidopsis/20160714_ec2_expanded_volume_01.png)(http://eagle.fish.washington.edu/Arabidopsis/20160714_ec2_expanded_volume_01.png)\n\n\n\nCheck to see if I actually have the expanded storage volume or not. It turns out, I do! (notice that the only drive listed is \"xvda\" and its partition, \"xvda/xvda1\" AND they are equal in size; 150G):\n\n\n\n![](https://eagle.fish.washington.edu/Arabidopsis/20160714_ec2_expanded_volume_03.jpg)(http://eagle.fish.washington.edu/Arabidopsis/20160714_ec2_expanded_volume_03.jpg)\n\n\n\nTime to upload (via the secure copy command) the files to my EC2 instance! The following commands upload the files to a folder called \"data\" in my /home directory. I also ran the \"time\" command at the beginning to get an idea of how long it takes to upload each of these files.\n\n\n    \n    <code>time scp -i ~/Dropbox/Lab/Sam/bioinformatics.pem /Volumes/web/nightingales/O_lurida/20160223_gbs/160123_I132_FCH3YHMBBXX_L4_OYSzenG1AAD96FAAPEI-109_1.fq.gz ubuntu@ec2.ip.address:~/data</code>\n\n\n\n\n    \n    <code>time scp -i ~/Dropbox/Lab/Sam/bioinformatics.pem /Volumes/web/nightingales/O_lurida/20160223_gbs/160123_I132_FCH3YHMBBXX_L4_OYSzenG1AAD96FAAPEI-109_2.fq.gz ubuntu@ec2.ip.address:~/data</code>\n\n\n\n\n\nDetails on upload times and file sizes:\n\n![](https://eagle.fish.washington.edu/Arabidopsis/20160714_ec2_upload_times.png)(http://eagle.fish.washington.edu/Arabidopsis/20160714_ec2_upload_times.png)\n\n\n\nConfim the files now reside in my EC2 instance:\n\n![](https://eagle.fish.washington.edu/Arabidopsis/20160714_ec2_confirm_transfer.jpg)(http://eagle.fish.washington.edu/Arabidopsis/20160714_ec2_confirm_transfer.jpg)\n\n\n\nAlas, I should've captured all of this in a Jupyter Notebook. However, I didn't because I thought I would need to enter passwords (which you can't do with a Jupyter Notebook). It turns out, I didn't need a password for anything; even when using \"sudo\" on the EC2 instance. Oh well, it's set up and running with my data finally accessible. That's all that really matters here.\n\nAlrighty, time to get rolling on some data analysis with a fancy new Amazon EC2 instance!!!\n","srcMarkdownNoYaml":"\n\n[Yesterday's post](https://robertslab.github.io/sams-notebook/posts/2016/2016-07-13-computing-the-very-quick-guide-to-amazon-web-services-cloud-computing-instances-ec2/) ended with me trying to mount a S3 bucket to my EC2 instance using [s3fs-fuse](https://github.com/s3fs-fuse/s3fs-fuse).\n\nWaited for the 36GB of data to copy over to new bucket with proper naming (i.e. no capital letters in name). Copying took hours; left lab before copying completed.\n\n\n\n\n\n    \n\n\n\n![](https://eagle.fish.washington.edu/Arabidopsis/20160714_s3f2_mount_error.jpg)(http://eagle.fish.washington.edu/Arabidopsis/20160714_s3f2_mount_error.jpg)\n\n\n\nSo, that didn't work. The reason that it doesn't work is that I uploaded the files to the S3 bucket via the Amazon AWS command line (awscli). Apparently, s3fs-fuse can't mount S3 buckets that contain data uploaded via awscli [[see this GitHub Issue for s3fs-fuse](https://github.com/s3fs-fuse/s3fs-fuse/issues/333)! However, I had to upload them via awscli because the web interface kept failing!\n\n\n\nThat means I need to upload the data directly to my EC2 instance, but my EC2 instance is set with the default storage capacity of 8GB so I need to increase the capacity to accommodate my two large files, as well as the anticipated intermediate files that will be generated by the types of analysis I plan on running. I'm guessing I'll need at least 100GB to be safe. To do this, I have to [expand the Elastic Block Storage (EBS) volume of my instance](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-expand-volume.html). The rest of stuff below is fully explained and covered very well in the EBS expansion link I have in the previous sentence.\n\nDon't be fooled into thinking I figured any of this out on my own!\n\n\n\n**Expanding the EC2 Instance**\n\nThe initial part of the process is creating a Snapshot of my instance. This took a long time (2.5hrs). However, I did finally decide to refresh the page when I noticed that the \"Status\" progress bar hadn't moved beyond 46% for well over an hour. After refreshing, the \"Status\" showed \"Complete.\" Maybe this actually was ready to go much faster, but the page didn't automatically refresh? Regardless, in retrospect, since this EC2 instance is pretty much brand new and doesn't have too many changes from when it was initialized, I probably should've just created a brand new EC2 instance with the desired amount of EBS...\n\nCreated volume from that Snapshot with 150GB of magnetic storage.\n\nAttached volume to the EC2 instance at /dev/sda1 (the default setting /dev/sdf resulted in an error message about the instance not having a root volume) and SSH'd into the instance. Odd, it seems to show that I still only have 8GB of storage (see the \"Usage of...\" in the screenshot below):\n\n\n\n![](https://eagle.fish.washington.edu/Arabidopsis/20160714_ec2_expanded_volume_01.png)(http://eagle.fish.washington.edu/Arabidopsis/20160714_ec2_expanded_volume_01.png)\n\n\n\nCheck to see if I actually have the expanded storage volume or not. It turns out, I do! (notice that the only drive listed is \"xvda\" and its partition, \"xvda/xvda1\" AND they are equal in size; 150G):\n\n\n\n![](https://eagle.fish.washington.edu/Arabidopsis/20160714_ec2_expanded_volume_03.jpg)(http://eagle.fish.washington.edu/Arabidopsis/20160714_ec2_expanded_volume_03.jpg)\n\n\n\nTime to upload (via the secure copy command) the files to my EC2 instance! The following commands upload the files to a folder called \"data\" in my /home directory. I also ran the \"time\" command at the beginning to get an idea of how long it takes to upload each of these files.\n\n\n    \n    <code>time scp -i ~/Dropbox/Lab/Sam/bioinformatics.pem /Volumes/web/nightingales/O_lurida/20160223_gbs/160123_I132_FCH3YHMBBXX_L4_OYSzenG1AAD96FAAPEI-109_1.fq.gz ubuntu@ec2.ip.address:~/data</code>\n\n\n\n\n    \n    <code>time scp -i ~/Dropbox/Lab/Sam/bioinformatics.pem /Volumes/web/nightingales/O_lurida/20160223_gbs/160123_I132_FCH3YHMBBXX_L4_OYSzenG1AAD96FAAPEI-109_2.fq.gz ubuntu@ec2.ip.address:~/data</code>\n\n\n\n\n\nDetails on upload times and file sizes:\n\n![](https://eagle.fish.washington.edu/Arabidopsis/20160714_ec2_upload_times.png)(http://eagle.fish.washington.edu/Arabidopsis/20160714_ec2_upload_times.png)\n\n\n\nConfim the files now reside in my EC2 instance:\n\n![](https://eagle.fish.washington.edu/Arabidopsis/20160714_ec2_confirm_transfer.jpg)(http://eagle.fish.washington.edu/Arabidopsis/20160714_ec2_confirm_transfer.jpg)\n\n\n\nAlas, I should've captured all of this in a Jupyter Notebook. However, I didn't because I thought I would need to enter passwords (which you can't do with a Jupyter Notebook). It turns out, I didn't need a password for anything; even when using \"sudo\" on the EC2 instance. Oh well, it's set up and running with my data finally accessible. That's all that really matters here.\n\nAlrighty, time to get rolling on some data analysis with a fancy new Amazon EC2 instance!!!\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../../styles.css"],"toc":true,"toc-depth":5,"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.42","editor":"source","theme":"darkly","page-layout":"full","code-background":true,"code-copy":true,"title-block-banner":true,"author":"Sam White","toc-title":"Contents","toc-location":"left","date":"2016-07-14 20:20:33+00:00","layout":"post","slug":"computing-a-very-quick-guide-to-amazon-ec2-continued","title":"Computing - A Very Quick \"Guide\" to Amazon EC2 Continued","categories":["2016","Miscellaneous"],"tags":["EBS","EC2","s3fs-fuse","scp"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}