{"title":"Mox - Olympia oyster genome annotation progress (using Maker 2.31.10)","markdown":{"yaml":{"author":"Sam White","toc-title":"Contents","toc-depth":5,"toc-location":"left","date":"2018-07-11 20:11:05+00:00","layout":"post","slug":"mox-olympia-oyster-genome-annotation-progress-using-maker-2-31-10","title":"Mox - Olympia oyster genome annotation progress (using Maker 2.31.10)","categories":["2018","Olympia Oyster Genome Sequencing"],"tags":["maker","mox","olympia oyster","Ostrea lurida"]},"headingText":"TL;DR - It appears to be continuing where it left off!","containsRefs":false,"markdown":"\n\n\n\n\nI decided to spend some time to figure out what was actually happening, as it's clear that the annotation process is going to need some additional time to run and may span an additional monthly maintenance shutdown.\n\nThis is great, because, otherwise, this will take an eternity to actually complete (particularly because we'd have to move the job to run on one of our lab's computers - which pale in comparison to the specs of our Mox nodes).\n\nHowever, it's a bit shocking that this is taking this long, even on a Mox node!\n\nI started annotating the Olympia oyster genome on 20180529. Since then, the job has been interrupted twice by monthly Mox maintenance (which happens on the 2nd Tuesday of each month). Additionally, when this happens, the SLURM output file is overwritten, making it difficult to assess whether or not Maker continues where it left off or if it's starting over from scratch.\n\nAnyway, here's how I deduced that the program is continuing where it left off.\n\n\n\n\n\n  1. I figured out that it produces a generic feature format (GFF) file for each contig.\n\n\n\n  2. Decided to search for the first contig GFF and look at it's last modified date. This would tell me if it was newly generated (i.e. on the date that the job was restarted after the maintenance shutdown) or if it was old. Additionally, if there were more than one of these files, then I'd also know that Maker was just starting at the beginning and writing data to a different location.\n\n![](https://owl.fish.washington.edu/Athaliana/20180711_mox_maker_progress_01.png)\n\nThis shows:\n\n\n\n    1. Only one copy of Contig0.gff exists.\n\n\n\n    2. Last modified date is 20180530.\n\n\n\n\n\n  3. Check the slurm output file for info.\n\n![](https://owl.fish.washington.edu/Athaliana/20180711_mox_maker_progress_02.png)\n\nThis reveals this important piece of info:\n\n\n\n<blockquote>\n  MAKER WARNING: The file 20180529_oly_annotation_01.maker.output/20180529_oly_annotation_01_datastore/AC/68/Contig215522//theVoid.Contig215522/0/Contig215522.0.all.rb.out\n  did not finish on the last run\n</blockquote>\n\n\n\n\nAll of these taken together lead me to confidently conclude that Maker is _not_ restarting from the beginning and is, indeed, continuing where it left off. WHEW!\n\nJust for kicks, I also ran a count of GFF files to see where this stands so far:\n\n![](https://owl.fish.washington.edu/Athaliana/20180711_mox_maker_progress_03.png)\n\nWow! 622,010 GFFs!!!\n\nFinally, for posterity, here's the SLURM script I used to submit this job, back in May! I'll have all of the corresponding genome files, proteome files, transcriptome files, etc. on one of our servers once the job completes.\n\n\n    \n    <code>\n    #!/bin/bash\n    ## Job Name\n    #SBATCH --job-name=20180529_oly_maker_genome_annotation\n    ## Allocation Definition\n    #SBATCH --account=srlab\n    #SBATCH --partition=srlab\n    ## Resources\n    ## Nodes\n    #SBATCH --nodes=1\n    ## Walltime (days-hours:minutes:seconds format)\n    #SBATCH --time=30-00:00:00\n    ## Memory per node\n    #SBATCH --mem=500G\n    ##turn on e-mail notification\n    #SBATCH --mail-type=ALL\n    #SBATCH --mail-user=samwhite@uw.edu\n    ## Specify the working directory for this job\n    #SBATCH --workdir=/gscratch/srlab/sam/outputs/20180529_oly_maker_genome_annotation\n    \n    ## Establish variables for more readable code\n    \n    ### Path to Maker executable\n    maker=/gscratch/srlab/programs/maker-2.31.10/bin/maker\n    \n    ### Path to Olympia oyster genome FastA file\n    oly_genome=/gscratch/srlab/sam/data/O_lurida/oly_genome_assemblies/jelly.out.fasta\n    \n    ### Path to Olympia oyster transcriptome FastA file\n    oly_transcriptome=/gscratch/srlab/sam/data/O_lurida/oly_transcriptome_assemblies/Olurida_transcriptome_v3.fasta\n    \n    ### Path to Crassotrea gigas NCBI protein FastA\n    gigas_proteome=/gscratch/srlab/sam/data/C_gigas/gigas_ncbi_protein/GCA_000297895.1_oyster_v9_protein.faa\n    \n    ### Path to Crassostrea virginica NCBI protein FastA\n    virginica_proteome=/gscratch/srlab/sam/data/C_virginica/virginica_ncbi_protein/GCF_002022765.2_C_virginica-3.0_protein.faa\n    \n    ## Create Maker control files needed for running Maker\n    $maker -CTL\n    \n    ## Store path to options control file\n    maker_opts_file=./maker_opts.ctl\n    \n    ## Create combined proteome FastA file\n    touch gigas_virginica_ncbi_proteomes.fasta\n    cat \"$gigas_proteome\" >> gigas_virginica_ncbi_proteomes.fasta\n    cat \"$virginica_proteome\" >> gigas_virginica_ncbi_proteomes.fasta\n    \n    ## Edit options file\n    \n    ### Set paths to O.lurida genome and transcriptome.\n    ### Set path to combined C. gigas and C.virginica proteomes.\n    ## The use of the % symbol sets the delimiter sed uses for arguments.\n    ## Normally, the delimiter that most examples use is a slash \"/\".\n    ## But, we need to expand the variables into a full path with slashes, which screws up sed.\n    ## Thus, the use of % symbol instead (it could be any character that is NOT present in the expanded variable; doesn't have to be \"%\").\n    sed -i \"/^genome=/ s% %$oly_genome %\" \"$maker_opts_file\"\n    sed -i \"/^est=/ s% %$oly_transcriptome %\" \"$maker_opts_file\"\n    sed -i \"/^protein=/ s% %$gigas_virginica_ncbi_proteomes %\" \"$maker_opts_file\"\n    \n    ## Run Maker\n    ### Set basename of files and specify number of CPUs to use\n    $maker \\\n    -base 20180529_oly_annotation_01 \\\n    -cpus 24\n    </code>\n","srcMarkdownNoYaml":"\n\n#### TL;DR - It appears to be continuing where it left off!\n\n\n\nI decided to spend some time to figure out what was actually happening, as it's clear that the annotation process is going to need some additional time to run and may span an additional monthly maintenance shutdown.\n\nThis is great, because, otherwise, this will take an eternity to actually complete (particularly because we'd have to move the job to run on one of our lab's computers - which pale in comparison to the specs of our Mox nodes).\n\nHowever, it's a bit shocking that this is taking this long, even on a Mox node!\n\nI started annotating the Olympia oyster genome on 20180529. Since then, the job has been interrupted twice by monthly Mox maintenance (which happens on the 2nd Tuesday of each month). Additionally, when this happens, the SLURM output file is overwritten, making it difficult to assess whether or not Maker continues where it left off or if it's starting over from scratch.\n\nAnyway, here's how I deduced that the program is continuing where it left off.\n\n\n\n\n\n  1. I figured out that it produces a generic feature format (GFF) file for each contig.\n\n\n\n  2. Decided to search for the first contig GFF and look at it's last modified date. This would tell me if it was newly generated (i.e. on the date that the job was restarted after the maintenance shutdown) or if it was old. Additionally, if there were more than one of these files, then I'd also know that Maker was just starting at the beginning and writing data to a different location.\n\n![](https://owl.fish.washington.edu/Athaliana/20180711_mox_maker_progress_01.png)\n\nThis shows:\n\n\n\n    1. Only one copy of Contig0.gff exists.\n\n\n\n    2. Last modified date is 20180530.\n\n\n\n\n\n  3. Check the slurm output file for info.\n\n![](https://owl.fish.washington.edu/Athaliana/20180711_mox_maker_progress_02.png)\n\nThis reveals this important piece of info:\n\n\n\n<blockquote>\n  MAKER WARNING: The file 20180529_oly_annotation_01.maker.output/20180529_oly_annotation_01_datastore/AC/68/Contig215522//theVoid.Contig215522/0/Contig215522.0.all.rb.out\n  did not finish on the last run\n</blockquote>\n\n\n\n\nAll of these taken together lead me to confidently conclude that Maker is _not_ restarting from the beginning and is, indeed, continuing where it left off. WHEW!\n\nJust for kicks, I also ran a count of GFF files to see where this stands so far:\n\n![](https://owl.fish.washington.edu/Athaliana/20180711_mox_maker_progress_03.png)\n\nWow! 622,010 GFFs!!!\n\nFinally, for posterity, here's the SLURM script I used to submit this job, back in May! I'll have all of the corresponding genome files, proteome files, transcriptome files, etc. on one of our servers once the job completes.\n\n\n    \n    <code>\n    #!/bin/bash\n    ## Job Name\n    #SBATCH --job-name=20180529_oly_maker_genome_annotation\n    ## Allocation Definition\n    #SBATCH --account=srlab\n    #SBATCH --partition=srlab\n    ## Resources\n    ## Nodes\n    #SBATCH --nodes=1\n    ## Walltime (days-hours:minutes:seconds format)\n    #SBATCH --time=30-00:00:00\n    ## Memory per node\n    #SBATCH --mem=500G\n    ##turn on e-mail notification\n    #SBATCH --mail-type=ALL\n    #SBATCH --mail-user=samwhite@uw.edu\n    ## Specify the working directory for this job\n    #SBATCH --workdir=/gscratch/srlab/sam/outputs/20180529_oly_maker_genome_annotation\n    \n    ## Establish variables for more readable code\n    \n    ### Path to Maker executable\n    maker=/gscratch/srlab/programs/maker-2.31.10/bin/maker\n    \n    ### Path to Olympia oyster genome FastA file\n    oly_genome=/gscratch/srlab/sam/data/O_lurida/oly_genome_assemblies/jelly.out.fasta\n    \n    ### Path to Olympia oyster transcriptome FastA file\n    oly_transcriptome=/gscratch/srlab/sam/data/O_lurida/oly_transcriptome_assemblies/Olurida_transcriptome_v3.fasta\n    \n    ### Path to Crassotrea gigas NCBI protein FastA\n    gigas_proteome=/gscratch/srlab/sam/data/C_gigas/gigas_ncbi_protein/GCA_000297895.1_oyster_v9_protein.faa\n    \n    ### Path to Crassostrea virginica NCBI protein FastA\n    virginica_proteome=/gscratch/srlab/sam/data/C_virginica/virginica_ncbi_protein/GCF_002022765.2_C_virginica-3.0_protein.faa\n    \n    ## Create Maker control files needed for running Maker\n    $maker -CTL\n    \n    ## Store path to options control file\n    maker_opts_file=./maker_opts.ctl\n    \n    ## Create combined proteome FastA file\n    touch gigas_virginica_ncbi_proteomes.fasta\n    cat \"$gigas_proteome\" >> gigas_virginica_ncbi_proteomes.fasta\n    cat \"$virginica_proteome\" >> gigas_virginica_ncbi_proteomes.fasta\n    \n    ## Edit options file\n    \n    ### Set paths to O.lurida genome and transcriptome.\n    ### Set path to combined C. gigas and C.virginica proteomes.\n    ## The use of the % symbol sets the delimiter sed uses for arguments.\n    ## Normally, the delimiter that most examples use is a slash \"/\".\n    ## But, we need to expand the variables into a full path with slashes, which screws up sed.\n    ## Thus, the use of % symbol instead (it could be any character that is NOT present in the expanded variable; doesn't have to be \"%\").\n    sed -i \"/^genome=/ s% %$oly_genome %\" \"$maker_opts_file\"\n    sed -i \"/^est=/ s% %$oly_transcriptome %\" \"$maker_opts_file\"\n    sed -i \"/^protein=/ s% %$gigas_virginica_ncbi_proteomes %\" \"$maker_opts_file\"\n    \n    ## Run Maker\n    ### Set basename of files and specify number of CPUs to use\n    $maker \\\n    -base 20180529_oly_annotation_01 \\\n    -cpus 24\n    </code>\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../../styles.css"],"toc":true,"toc-depth":5,"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.42","editor":"source","theme":"darkly","page-layout":"full","code-background":true,"code-copy":true,"title-block-banner":true,"author":"Sam White","toc-title":"Contents","toc-location":"left","date":"2018-07-11 20:11:05+00:00","layout":"post","slug":"mox-olympia-oyster-genome-annotation-progress-using-maker-2-31-10","title":"Mox - Olympia oyster genome annotation progress (using Maker 2.31.10)","categories":["2018","Olympia Oyster Genome Sequencing"],"tags":["maker","mox","olympia oyster","Ostrea lurida"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}