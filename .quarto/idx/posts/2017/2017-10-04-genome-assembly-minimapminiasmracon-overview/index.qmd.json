{"title":"Genome Assembly - minimap/miniasm/racon Overview","markdown":{"yaml":{"author":"Sam White","toc-title":"Contents","toc-depth":5,"toc-location":"left","date":"2017-10-04 14:58:31+00:00","layout":"post","slug":"genome-assembly-minimapminiasmracon-overview","title":"Genome Assembly - minimap/miniasm/racon Overview","categories":["2017","Olympia Oyster Genome Sequencing"],"tags":["assembly","miniasm","minimap","racon"]},"headingText":"1 Run minimap:","containsRefs":false,"markdown":"\n\nPreviously, I used the following three tools to do quick assembly of our Olympia oyster PacBio data:\n\n\n\n\n\n  * [minimap](https://robertslab.github.io/sams-notebook/posts/2017/2017-09-07-genome-assembly-olympia-oyster-pacbio-minimapminiasmracon/)\n\n\n  * [miniasm](https://robertslab.github.io/sams-notebook/posts/2017/2017-09-18-genome-assembly-olympia-oyster-pacbio-minimapminiasmracon-2/)\n\n\n  * [racon](https://robertslab.github.io/sams-notebook/posts/2017/2017-09-18-genome-assembly-olympia-oyster-pacbio-minimapminiasmracon-3/)\n\n\n\nI'm just posting this quick overview to make it easier to follow what was actually done without having to read through three different notebook entries and corresponding Jupyter notebooks.\n\nWhen I say \"quick assembly\", I mean it. The entire assembly process probably takes about an hour on the computer I used - that seems fast.\n\nHere's the quick and dirty of what was done:\n\n\n\n\n\n\nThis uses a pre-built set of defaults (the `ava-pb` in the code below) for analyzing PacBio data. Minimap only accepts two FASTQ files and you need to map your FASTQ file against itself. So, if you have multiple FASTQ sequencing files, you have to concatenate them into a single file prior to running minimap.\n\n\n    \n    <code>minimap2 -x ava-pb -t 23 \\\n    20170911_oly_pacbio_cat.fastq \\\n    20170911_oly_pacbio_cat.fastq \\\n    > 20170911_minimap2_pacbio_oly.paf</code>\n\n\n\n\n\n#### 2 Run miniasm:\n\n\n\nThis uses your concatenated FASTQ file and the PAF file output from the miniasm step. The code below is taken from the example provided in the miniasm documentation; there are other options available.\n\n\n    \n    <code>miniasm \\\n    -f \\\n    /home/data/20170911_oly_pacbio_cat.fastq /home/data/20170911_minimap2_pacbio_oly.paf > /home/data/20170918_oly_pacbio_miniasm_reads.gfa</code>\n\n\n\n\n\n#### 3 Convert miniasm output GFA to FASTA\n\n\n\nThe FASTA file is needed to re-run minimap in Step 4 below.\n\n\n    \n    <code>awk '$1 ~/S/ {print \">\"$2\"\\n\"$3}' 20170918_oly_pacbio_miniasm_reads.gfa > 20170918_oly_pacbio_miniasm_reads.fasta</code>\n\n\n\n\n\n#### 4 Run minimap with default settings\n\n\n\nUsing the default settings maps the FASTQ reads back to the contigs (the PAF file) created in the fist step. These mappings are required for Racon assembly (Step 5).\n\n\n    \n    <code>minimap2 \\\n    -t 23 \\\n    20170918_oly_pacbio_miniasm_reads.fasta 20170905_minimap2_pacibio_oly.paf > 20170918_minimap2_mapping_fasta_oly_pacbio.paf</code>\n\n\n\n\n\n#### 5 Run racon\n\n\n\nThe output file is the FASTA file listed below.\n\n\n    \n    <code>racon -t 24 \\\n    20170911_oly_pacbio_cat.fastq \\\n    20170918_oly_pacbio_minimap_mappings.paf \\\n    20170918_oly_pacbio_miniasm_assembly.gfa \\\n    20170918_oly_pacbio_racon1_consensus.fasta</code>\n","srcMarkdownNoYaml":"\n\nPreviously, I used the following three tools to do quick assembly of our Olympia oyster PacBio data:\n\n\n\n\n\n  * [minimap](https://robertslab.github.io/sams-notebook/posts/2017/2017-09-07-genome-assembly-olympia-oyster-pacbio-minimapminiasmracon/)\n\n\n  * [miniasm](https://robertslab.github.io/sams-notebook/posts/2017/2017-09-18-genome-assembly-olympia-oyster-pacbio-minimapminiasmracon-2/)\n\n\n  * [racon](https://robertslab.github.io/sams-notebook/posts/2017/2017-09-18-genome-assembly-olympia-oyster-pacbio-minimapminiasmracon-3/)\n\n\n\nI'm just posting this quick overview to make it easier to follow what was actually done without having to read through three different notebook entries and corresponding Jupyter notebooks.\n\nWhen I say \"quick assembly\", I mean it. The entire assembly process probably takes about an hour on the computer I used - that seems fast.\n\nHere's the quick and dirty of what was done:\n\n\n\n#### 1 Run minimap:\n\n\n\nThis uses a pre-built set of defaults (the `ava-pb` in the code below) for analyzing PacBio data. Minimap only accepts two FASTQ files and you need to map your FASTQ file against itself. So, if you have multiple FASTQ sequencing files, you have to concatenate them into a single file prior to running minimap.\n\n\n    \n    <code>minimap2 -x ava-pb -t 23 \\\n    20170911_oly_pacbio_cat.fastq \\\n    20170911_oly_pacbio_cat.fastq \\\n    > 20170911_minimap2_pacbio_oly.paf</code>\n\n\n\n\n\n#### 2 Run miniasm:\n\n\n\nThis uses your concatenated FASTQ file and the PAF file output from the miniasm step. The code below is taken from the example provided in the miniasm documentation; there are other options available.\n\n\n    \n    <code>miniasm \\\n    -f \\\n    /home/data/20170911_oly_pacbio_cat.fastq /home/data/20170911_minimap2_pacbio_oly.paf > /home/data/20170918_oly_pacbio_miniasm_reads.gfa</code>\n\n\n\n\n\n#### 3 Convert miniasm output GFA to FASTA\n\n\n\nThe FASTA file is needed to re-run minimap in Step 4 below.\n\n\n    \n    <code>awk '$1 ~/S/ {print \">\"$2\"\\n\"$3}' 20170918_oly_pacbio_miniasm_reads.gfa > 20170918_oly_pacbio_miniasm_reads.fasta</code>\n\n\n\n\n\n#### 4 Run minimap with default settings\n\n\n\nUsing the default settings maps the FASTQ reads back to the contigs (the PAF file) created in the fist step. These mappings are required for Racon assembly (Step 5).\n\n\n    \n    <code>minimap2 \\\n    -t 23 \\\n    20170918_oly_pacbio_miniasm_reads.fasta 20170905_minimap2_pacibio_oly.paf > 20170918_minimap2_mapping_fasta_oly_pacbio.paf</code>\n\n\n\n\n\n#### 5 Run racon\n\n\n\nThe output file is the FASTA file listed below.\n\n\n    \n    <code>racon -t 24 \\\n    20170911_oly_pacbio_cat.fastq \\\n    20170918_oly_pacbio_minimap_mappings.paf \\\n    20170918_oly_pacbio_miniasm_assembly.gfa \\\n    20170918_oly_pacbio_racon1_consensus.fasta</code>\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../../styles.css"],"toc":true,"toc-depth":5,"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.42","editor":"source","theme":"darkly","page-layout":"full","code-background":true,"code-copy":true,"title-block-banner":true,"author":"Sam White","toc-title":"Contents","toc-location":"left","date":"2017-10-04 14:58:31+00:00","layout":"post","slug":"genome-assembly-minimapminiasmracon-overview","title":"Genome Assembly - minimap/miniasm/racon Overview","categories":["2017","Olympia Oyster Genome Sequencing"],"tags":["assembly","miniasm","minimap","racon"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}